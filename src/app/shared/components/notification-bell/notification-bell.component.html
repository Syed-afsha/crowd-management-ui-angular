<div class="notification-bell-container">
  <button class="bell-button" (click)="toggleDropdown()" type="button">
    <mat-icon class="bell-icon">notifications</mat-icon>
    <span *ngIf="unreadCount > 0" class="badge">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
  </button>

  <div *ngIf="showDropdown" class="dropdown-overlay" (click)="closeDropdown()"></div>

  <div *ngIf="showDropdown" class="notification-dropdown">
    <div class="dropdown-header">
      <h3>Alerts</h3>
      <button class="close-btn" (click)="closeDropdown()" type="button" aria-label="Close alerts">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <div class="alerts-list">
      <div *ngIf="alerts.length === 0" class="no-alerts">
        <p>No alerts</p>
      </div>
      
      <div 
        *ngFor="let alert of alerts; trackBy: trackByAlertId" 
        class="alert-card"
        [class]="'priority-' + alert._priority?.toLowerCase()">
        <div class="alert-date">{{ alert._formattedDate }}</div>
        <div class="alert-message">{{ alert._displayText }}</div>
        <div class="alert-footer">
          <div class="alert-location">
            <mat-icon class="location-icon">location_on</mat-icon>
            <span>{{ alert.zone || 'Unknown Zone' }}</span>
          </div>
          <span class="priority-badge" [class]="'priority-' + alert._priority?.toLowerCase()">
            {{ alert._priority }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

